{% extends 'survey/base.html' %}

{% block title %}Survey Creator Dashboard{% endblock %}

{% block content %}
<div class="container">
    <h1>Welcome, {{ user_name }} ({{ role }})</h1>
    <h2>Your Surveys</h2>

    <a href="{% url 'create_survey' %}" class="create-survey">Create New Survey</a>

    <div class="survey-list">
        {% if surveys %}
            {% for survey in surveys %}
                <div class="survey-item">
                    <h3>{{ survey.title }}</h3>
                    <p>{{ survey.description }}</p>
                    {% if survey.is_published == True %}
                    <p>Status: Published</p>
                    {% elif survey.is_closed == True %}
                    <p>Status: Closed</p>
                    {% else %}
                    <p>Status: Draft</p>
                    {% endif %}
                    <div class="actions">
                        <a href="{% url 'edit_survey' survey.id %}">Edit</a>
                        {% if survey.is_published == False %}
                            <a href="{% url 'publish_survey' survey.id %}">Publish</a>
                        {% else %}
                            <a href="{% url 'close_survey' survey.id %}">Close</a>
                        {% endif %}
                        <a href="{% url 'view_results' survey.id %}">View Results</a>
                    </div>
                </div>
            {% endfor %}
        {% else %}
            <p>You haven't created any surveys yet.</p>
        {% endif %}
    </div>
</div>
{% endblock %}
