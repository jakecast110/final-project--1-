{% extends 'survey/base.html' %}

{% block title %}Creator Dashboard{% endblock %}

{% block content %}
    <h2>Welcome, (Survey Creator)</h2>

    <h3>Your Surveys</h3>
    <a href="{% url 'create_survey' %}" class="btn btn-primary">Create New Survey</a>

    <ul>
        {% for survey in surveys %}
            <li>
                <strong>{{ survey.title }}</strong>
                <p>Status: 
                    {% if survey.is_closed %}
                        Closed
                    {% elif survey.is_published %}
                        Published
                    {% else %}
                        Draft
                    {% endif %}
                </p>
                <div>
                    <a href="{% url 'edit_survey' survey.id %}" class="btn btn-warning btn-sm">Edit</a>
                    
                    {% if survey.is_closed %}
                        <a href="{% url 'republish_survey' survey.id %}" class="btn btn-secondary btn-sm">Republish</a>
                    {% elif survey.is_published %}
                        <a href="{% url 'close_survey' survey.id %}" class="btn btn-secondary btn-sm">Close</a>
                    {% else %}
                        <a href="{% url 'publish_survey' survey.id %}" class="btn btn-success btn-sm">Publish</a>
                    {% endif %}
                    
                    <a href="{% url 'view_results' survey.id %}" class="btn btn-info btn-sm">View Results</a>
                </div>
            </li>
        {% endfor %}
    </ul>

    {% if not surveys %}
        <p>No surveys created yet.</p>
    {% endif %}
{% endblock %}
