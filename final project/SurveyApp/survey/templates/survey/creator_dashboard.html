{% extends 'survey/base.html' %}

{% block title %}Survey Creator Dashboard{% endblock %}

{% block content %}
<div class="container">
    <h1>Welcome, {{ user_name }} ({{ role }})</h1>
    <h2>Your Surveys</h2>

    <a href="{% url 'create_survey' %}" class="create-survey">Create New Survey</a>

    <div class="survey-list">
        {% if surveys %}
            {% for survey in surveys %}
                <div class="survey-item">
                    <h3>{{ survey.title }}</h3>
                    <p>{{ survey.description }}</p>
                    <p>Status: {{ survey.state|capfirst }}</p>
                    <div class="actions">
                        <a href="{% url 'edit_survey' survey.id %}">Edit</a>
                        {% if survey.state == 'draft' %}
                            <a href="{% url 'publish_survey' survey.id %}">Publish</a>
                        {% elif survey.state == 'published' %}
                            <a href="{% url 'close_survey' survey.id %}">Close</a>
                        {% endif %}
                        <a href="{% url 'view_results' survey.id %}">View Results</a>
                    </div>
                </div>
            {% endfor %}
        {% else %}
            <p>You haven't created any surveys yet.</p>
        {% endif %}
    </div>
</div>
{% endblock %}
